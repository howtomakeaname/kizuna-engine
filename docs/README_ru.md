# Kizuna Engine - Бесконечная Визуальная Новелла

![Стартовый Экран](https://img.cdn1.vip/i/692009020938d_1763707138.webp)

![Game View 1](https://img.cdn1.vip/i/692051d06f083_1763725776.webp)

![Game View 2](https://img.cdn1.vip/i/692051d03f98b_1763725776.webp)

Генератор визуальных новелл в реальном времени, работающий на базе генеративного ИИ. Погрузитесь в уникальную историю, где каждый выбор имеет значение, с динамическими ресурсами и поддержкой нескольких языков.

[English Docs](../README.md)

## Конфигурация

Этот проект поддерживает несколько ИИ-провайдеров для генерации текста и изображений.

### Переменные Окружения

Настройте следующие переменные в вашем окружении (например, в файле `.env`):

| Переменная | Описание | По умолчанию |
|----------|-------------|---------|
| `AI_PROVIDER` | Выберите `gemini`, `siliconflow` или `custom`. | `gemini` |
| `API_KEY` | **Обязательно для Gemini.** Ваш API-ключ Google GenAI. | - |
| `SILICONFLOW_API_KEY` | **Обязательно для SiliconFlow.** Ваш API-ключ SiliconFlow. | - |
| `GEMINI_API_KEY` | Альтернативное имя для `API_KEY`. | - |
| `CUSTOM_API_URL` | **Обязательно для Custom.** URL для генерации текста (Chat Completions). | - |
| `CUSTOM_API_KEY` | Опциональный ключ для Custom API. | - |
| `CUSTOM_MODEL_NAME` | ID модели для Custom API (напр. `llama3`, `gpt-4o`). | `gpt-3.5-turbo` |
| `CUSTOM_IMAGE_API_URL`| Опциональный URL для генерации изображений. | - |

### Детали Провайдеров

#### 1. Google Gemini (По умолчанию)
- **Текстовая модель**: `gemini-2.5-flash`
- **Модель изображений**: `imagen-4.0-generate-001`
- **Особенности**: Нативная поддержка JSON схемы, высокая скорость, мультимодальность.

#### 2. SiliconFlow
- **Текстовая модель**: `deepseek-ai/DeepSeek-V3`
- **Модель изображений**: `Qwen/Qwen-Image`
- **Особенности**: Использует возможности рассуждения DeepSeek и генерацию изображений Qwen.

#### 3. Custom / Пользовательские API (Self-Hosted)
Подключение к вашему собственному API, совместимому со **стандартом OpenAI**.
Работает с такими инструментами, как:
- **Ollama** (локально)
- **LM Studio** (локально)
- **vLLM** (сервер)
- **LocalAI** (сервер)
- **Любой облачный провайдер, совместимый с OpenAI** (Groq, Together и т.д.)

**Пример .env для Ollama (Локально):**
```env
AI_PROVIDER=custom
CUSTOM_API_URL=http://localhost:11434/v1/chat/completions
CUSTOM_MODEL_NAME=llama3
CUSTOM_IMAGE_API_URL= # Оставьте пустым, если нет локального генератора изображений
```

**Пример .env для vLLM / Сервера:**
```env
AI_PROVIDER=custom
CUSTOM_API_URL=http://192.168.1.50:8000/v1/chat/completions
CUSTOM_API_KEY=my-secret-token
CUSTOM_MODEL_NAME=meta-llama/Meta-Llama-3-70B-Instruct
```

**Требования к Custom API:**
- Должен поддерживать `response_format: { type: "json_object" }` или быть достаточно умным, чтобы возвращать строго валидный JSON при запросе.
- Эндпоинт должен соответствовать сигнатуре `/v1/chat/completions`.

## Установка

1. Создайте файл `.env` в корневой директории.
2. Добавьте ваши настройки, основываясь на примерах выше.
3. Перезапустите сервер разработки (`npm run dev`), чтобы применить изменения.

## Возможности
- **Темы**: Выбирайте из Школы, Магической Академии, Мейд-кафе, Исекая или создайте свой собственный сценарий.
- **Бесконечная История**: Сюжет генерируется на лету.
- **Мультиязычность**: Полная поддержка английского, китайского, японского и русского языков.
- **Галерея**: Сохраняйте любимые сцены и открытые воспоминания.
- **Сохранение/Загрузка**: Поддержка автосохранения и ручных слотов.
